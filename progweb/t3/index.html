<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <title>Trab 3 - Prog Web</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>

    <body style="background-color: antiquewhite; margin: 0; overflow: hidden;">
        <canvas id="reta" style="display: block;"></canvas>

        <script>
            var canvas = document.getElementById("reta");
            var ctx = canvas.getContext("2d");

            var width = window.innerWidth;
            var height = window.innerHeight;

            canvas.width = width;
            canvas.height = height;

            ctx.fillStyle = "pink";
            ctx.fillRect((width/2) - 150, 200, 300, 10);

            meio = false;
            direita = false;

            xAtual    = (width/2) - 150,  yAtual    = 200;
            xAnterior = (width/2) - 150 , yAnterior = 200;

            function drawLine () {    
                ctx.clearRect(xAnterior, yAnterior, 300, 10);
                ctx.fillStyle = "pink";
                ctx.fillRect(xAtual - 150, yAtual - 5, 300, 10);

                xAnterior = xAtual - 150; yAnterior = yAtual - 5;
            }

            canvas.addEventListener("mousedown", function(event) {
                if ( event.clientX >= (xAtual + 50) && event.clientX <= (xAtual + 250) && event.clientY >= yAtual && event.clientY <= (yAtual + 10) ) {
                    meio = true;
                }

                else if ( event.clientX >= (xAnterior + 250) && event.clientX <= (xAnterior + 300) && event.clientY >= yAnterior && event.clientY <= (yAnterior + 10) ) {
                    direita = true;
                }
            });

            canvas.addEventListener("mousemove", function(event) {
                if (meio) {
                    yAtual = event.clientY;
                    xAtual = event.clientX;
                    drawLine ();
                }

                else if (direita) {
                    ctx.rotate (45 * (Math.PI/180));
                    ctx.clearRect(xAnterior, yAnterior, 300, 10);
                    ctx.fillStyle = "pink";
                    ctx.fillRect(xAnterior, yAnterior, 300, 10);
                }
            });

            canvas.addEventListener("mouseup", function(event) {
                meio = false;
                direita = false;
            });

        </script>
    </body>
</html>
